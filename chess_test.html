<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Chess test</title>
  <link rel="stylesheet" href="resources/qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script src="resources/qunit.js"></script>
  <script src="chess.js"></script>
  <script>
    test("Board isLegalMove PAWN", function() {
      var board = new Board();
      board.placePiece(PieceEnum.PAWN, Player.ColorEnum.BLACK, Pos(0, 1));
      board.placePiece(PieceEnum.PAWN, Player.ColorEnum.WHITE, Pos(0, 6));
      board.placePiece(PieceEnum.KING, Player.ColorEnum.BLACK, Pos(2, 3),
                       { 'inCheck': false,
                         'checkedFrom': null,
                         'rightCastling': false,
                         'leftCastling' : false });
      board.placePiece(PieceEnum.KING, Player.ColorEnum.WHITE, Pos(5, 4),
                       { 'inCheck': false,
                         'checkedFrom': null,
                         'rightCastling': false,
                         'leftCastling' : false });

      ok(board.isLegalMove(PieceEnum.PAWN,
                           Player.ColorEnum.BLACK,
                           Pos(0, 1), Pos(0, 2)),
                           "Is legal to move one step up");
      ok(board.isLegalMove(PieceEnum.PAWN,
                           Player.ColorEnum.BLACK,
                           Pos(0, 1), Pos(0, 3)),
                           "Is legal to move two steps up");
      ok(!board.isLegalMove(PieceEnum.PAWN,
                            Player.ColorEnum.BLACK,
                            Pos(0, 1), Pos(0, 4)),
                            "Not legal to move three steps up");
      ok(!board.isLegalMove(PieceEnum.PAWN,
                            Player.ColorEnum.BLACK,
                            Pos(0, 1), Pos(1, 3)),
                            "Not legal to move diagonal");
    });

    test("Board isOkMove PAWN", function() {
      var board = new Board();
      board.placePiece(PieceEnum.PAWN, Player.ColorEnum.BLACK, Pos(0, 1));
      board.placePiece(PieceEnum.PAWN, Player.ColorEnum.WHITE, Pos(0, 6));
      board.placePiece(PieceEnum.KING, Player.ColorEnum.BLACK, Pos(2, 3),
                       { 'inCheck': false,
                         'checkedFrom': null,
                         'rightCastling': false,
                         'leftCastling' : false });
      board.placePiece(PieceEnum.KING, Player.ColorEnum.WHITE, Pos(5, 4),
                       { 'inCheck': false,
                         'checkedFrom': null,
                         'rightCastling': false,
                         'leftCastling' : false });

      // One step up, black.
      equal(board.isOkMove(PieceEnum.PAWN,
                           Pos(0, 1), Pos(0, 2),
                           Player.ColorEnum.BLACK),
            Board.UpdateStateEnum.OK_MOVE,
            "We expect value to be OK_MOVE");
      // Two step up, black.
      equal(board.isOkMove(PieceEnum.PAWN,
                           Pos(0, 1), Pos(0, 3),
                           Player.ColorEnum.BLACK),
            Board.UpdateStateEnum.OK_MOVE,
            "We expect value to be OK_MOVE");
      // One step up, white.
      equal(board.isOkMove(PieceEnum.PAWN,
                           Pos(0, 6), Pos(0, 5),
                           Player.ColorEnum.WHITE),
            Board.UpdateStateEnum.OK_MOVE,
            "We expect value to be OK_MOVE");
      // Two step up, white.
      equal(board.isOkMove(PieceEnum.PAWN,
                           Pos(0, 6), Pos(0, 4),
                           Player.ColorEnum.WHITE),
            Board.UpdateStateEnum.OK_MOVE,
            "We expect value to be OK_MOVE");
    });
  </script>
</body>
</html>
